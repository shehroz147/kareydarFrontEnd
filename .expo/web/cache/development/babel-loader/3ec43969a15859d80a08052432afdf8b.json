{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nexport var addToCart = function addToCart(product, quantity, price, selectProductType, navigation) {\n  return function _callee(dispatch) {\n    var cartProduct, cart, productArray, _updatedCartItems, newQuantity, cartProductIndex;\n\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"afcHalalUserCart\"));\n\n          case 3:\n            cart = _context.sent;\n            cartProduct = JSON.parse(cart);\n\n            if (!(!cartProduct || cartProduct.length === 0)) {\n              _context.next = 11;\n              break;\n            }\n\n            productArray = [{\n              productId: product._id,\n              quantity: quantity,\n              product: product,\n              price: quantity * price,\n              type: selectProductType\n            }];\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"afcHalalUserCart\", JSON.stringify(productArray)));\n\n          case 9:\n            dispatch({\n              type: \"ADD_TO_CART\",\n              payload: productArray\n            });\n            return _context.abrupt(\"return\", navigation.navigate(\"Cart\"));\n\n          case 11:\n            if (!(cartProduct.length > 0)) {\n              _context.next = 23;\n              break;\n            }\n\n            _updatedCartItems = _toConsumableArray(cartProduct);\n            cartProductIndex = cartProduct.findIndex(function (cartProduct) {\n              return cartProduct.productId === product._id;\n            });\n\n            if (cartProductIndex >= 0) {\n              newQuantity = cartProduct[cartProductIndex].quantity + quantity;\n              _updatedCartItems[cartProductIndex].quantity = newQuantity;\n              _updatedCartItems[cartProductIndex].price = newQuantity * price;\n            } else {\n              _updatedCartItems.push({\n                productId: product._id,\n                quantity: quantity,\n                price: quantity * price,\n                product: product,\n                type: selectProductType\n              });\n            }\n\n            _context.next = 17;\n            return _regeneratorRuntime.awrap(AsyncStorage.removeItem(\"afcHalalUserCart\"));\n\n          case 17:\n            _context.next = 19;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"afcHalalUserCart\", JSON.stringify(_updatedCartItems)));\n\n          case 19:\n            dispatch({\n              type: \"ADD_TO_CART\",\n              payload: _updatedCartItems\n            });\n            return _context.abrupt(\"return\", navigation.navigate(\"Cart\"));\n\n          case 23:\n            _context.next = 25;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"afcHalalUserCart\", JSON.stringify([{\n              productId: product._id,\n              quantity: quantity,\n              product: product,\n              price: quantity * price,\n              type: selectProductType\n            }])));\n\n          case 25:\n            dispatch({\n              type: \"ADD_TO_CART\",\n              payload: updatedCartItems\n            });\n            return _context.abrupt(\"return\", navigation.navigate(\"Cart\"));\n\n          case 27:\n            _context.next = 32;\n            break;\n\n          case 29:\n            _context.prev = 29;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 32:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 29]], Promise);\n  };\n};\nexport var RemoveItemFromCart = function RemoveItemFromCart(productId) {\n  return function _callee2(dispatch) {\n    var cartProduct, product, _updatedCartItems2;\n\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"afcHalalUserCart\"));\n\n          case 3:\n            product = _context2.sent;\n            cartProduct = JSON.parse(product);\n            _updatedCartItems2 = cartProduct.filter(function (item) {\n              return item.productId !== productId;\n            });\n            _context2.next = 8;\n            return _regeneratorRuntime.awrap(AsyncStorage.removeItem(\"afcHalalUserCart\"));\n\n          case 8:\n            _context2.next = 10;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"afcHalalUserCart\", JSON.stringify(_updatedCartItems2)));\n\n          case 10:\n            dispatch({\n              type: \"REMOVE_FROM_CART\",\n              payload: _updatedCartItems2\n            });\n            _context2.next = 16;\n            break;\n\n          case 13:\n            _context2.prev = 13;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(_context2.t0);\n\n          case 16:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 13]], Promise);\n  };\n};\nexport var getCartProducts = function getCartProducts() {\n  return function (dispatch) {\n    AsyncStorage.getItem(\"afcHalalUserCart\").then(function (value) {\n      var product = JSON.parse(value);\n      dispatch({\n        type: \"GET_CART_PRODUCTS\",\n        payload: product\n      });\n    }).catch(function (e) {\n      console.log(e.message);\n    });\n  };\n};\nexport var EmptyCart = function EmptyCart() {\n  return function (dispatch) {\n    AsyncStorage.removeItem(\"afcHalalUserCart\").then(function () {\n      dispatch({\n        type: \"EMPTY_CART\"\n      });\n    }).catch(function (e) {\n      console.log(e.message);\n    });\n  };\n};","map":{"version":3,"names":["AsyncStorage","addToCart","product","quantity","price","selectProductType","navigation","dispatch","getItem","cart","cartProduct","JSON","parse","length","productArray","productId","_id","type","setItem","stringify","payload","navigate","updatedCartItems","cartProductIndex","findIndex","newQuantity","push","removeItem","console","log","RemoveItemFromCart","filter","item","getCartProducts","then","value","catch","e","message","EmptyCart"],"sources":["C:/Users/hahah/Desktop/att/attornea-lawyer/src/Actions/CartActions.js"],"sourcesContent":["import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nexport const addToCart =\r\n  (product, quantity, price, selectProductType, navigation) =>\r\n  async (dispatch) => {\r\n    try {\r\n      let cartProduct;\r\n      const cart = await AsyncStorage.getItem(\"afcHalalUserCart\");\r\n      cartProduct = JSON.parse(cart);\r\n\r\n      if (!cartProduct || cartProduct.length === 0) {\r\n        let productArray = [\r\n          {\r\n            productId: product._id,\r\n            quantity: quantity,\r\n            product: product,\r\n            price: quantity * price,\r\n            type: selectProductType,\r\n          },\r\n        ];\r\n\r\n        // window.localStorage.setItem(`usersCart`, JSON.stringify(productArray));\r\n        //   try {\r\n        await AsyncStorage.setItem(\r\n          \"afcHalalUserCart\",\r\n          JSON.stringify(productArray)\r\n        );\r\n        dispatch({ type: \"ADD_TO_CART\", payload: productArray });\r\n        //   } catch (e) {\r\n        // console.log(e.message);\r\n        //   }\r\n        return navigation.navigate(`Cart`);\r\n      }\r\n      if (cartProduct.length > 0) {\r\n        //    Checking either there is any product in the cart\r\n        const updatedCartItems = [...cartProduct];\r\n        let newQuantity;\r\n        //   Checking either there is the same product in the cart\r\n\r\n        const cartProductIndex = cartProduct.findIndex((cartProduct) => {\r\n          return cartProduct.productId === product._id; //it will return true if the product is in the cart\r\n        });\r\n\r\n        // If Product already exist then chaniging  its quantity\r\n        if (cartProductIndex >= 0) {\r\n          newQuantity = cartProduct[cartProductIndex].quantity + quantity;\r\n          updatedCartItems[cartProductIndex].quantity = newQuantity;\r\n          updatedCartItems[cartProductIndex].price = newQuantity * price;\r\n        } else {\r\n          updatedCartItems.push({\r\n            productId: product._id,\r\n            quantity: quantity,\r\n            price: quantity * price,\r\n            product: product,\r\n            type: selectProductType,\r\n          });\r\n        }\r\n\r\n        //  try {\r\n        //     const cartProduct = await JSON.parse(AsyncStorage.getItem('usersCart'));\r\n        //   } catch(e) {\r\n        //     console.log(e.message);\r\n        //   }\r\n        await AsyncStorage.removeItem(\"afcHalalUserCart\");\r\n\r\n        // window.localStorage.removeItem(`hamzaFlawsUsersCart`);  //web\r\n\r\n        // window.localStorage.setItem(`hamzaFlawsUsersCart`, JSON.stringify(updatedCartItems));\r\n\r\n        await AsyncStorage.setItem(\r\n          \"afcHalalUserCart\",\r\n          JSON.stringify(updatedCartItems)\r\n        );\r\n        dispatch({ type: \"ADD_TO_CART\", payload: updatedCartItems });\r\n\r\n        return navigation.navigate(`Cart`);\r\n      } else {\r\n        await AsyncStorage.setItem(\r\n          `afcHalalUserCart`,\r\n          JSON.stringify([\r\n            {\r\n              productId: product._id,\r\n              quantity: quantity,\r\n              product: product,\r\n              price: quantity * price,\r\n              type: selectProductType,\r\n            },\r\n          ])\r\n        );\r\n        dispatch({ type: \"ADD_TO_CART\", payload: updatedCartItems });\r\n        return navigation.navigate(`Cart`);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\nexport const RemoveItemFromCart = (productId) => async (dispatch) => {\r\n  // const user = JSON.parse(window.localStorage.getItem(\"user\"));\r\n  let cartProduct;\r\n\r\n  try {\r\n    const product = await AsyncStorage.getItem(\"afcHalalUserCart\");\r\n    cartProduct = JSON.parse(product);\r\n\r\n    const updatedCartItems = cartProduct.filter((item) => {\r\n      return item.productId !== productId;\r\n    });\r\n\r\n    await AsyncStorage.removeItem(\"afcHalalUserCart\");\r\n\r\n    await AsyncStorage.setItem(\r\n      \"afcHalalUserCart\",\r\n      JSON.stringify(updatedCartItems)\r\n    );\r\n    // return updatedCartItems;\r\n    dispatch({ type: \"REMOVE_FROM_CART\", payload: updatedCartItems });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const getCartProducts = () => (dispatch) => {\r\n  AsyncStorage.getItem(\"afcHalalUserCart\")\r\n    .then((value) => {\r\n      const product = JSON.parse(value);\r\n\r\n      dispatch({ type: \"GET_CART_PRODUCTS\", payload: product });\r\n    })\r\n    .catch((e) => {\r\n      console.log(e.message);\r\n    });\r\n};\r\n\r\nexport const EmptyCart = () => (dispatch) => {\r\n  AsyncStorage.removeItem(\"afcHalalUserCart\")\r\n    .then(() => {\r\n      // const product = JSON.parse(value);\r\n\r\n      dispatch({ type: \"EMPTY_CART\" });\r\n    })\r\n    .catch((e) => {\r\n      console.log(e.message);\r\n    });\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}